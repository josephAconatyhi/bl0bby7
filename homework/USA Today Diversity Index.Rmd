---
title: "USA Today Diversity Index"
output: html_document
---

---
title: "Diversity Index for Maryland Cities"
author: "Your Name"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
```

## Overview

In this exercise, we will calculate the **USA TODAY Diversity Index** for Maryland cities with a population of at least 10,000 using 2020 Census race and ethnicity data. The Diversity Index reflects the probability that two randomly selected individuals from a city are of different races or ethnicities.

A score of 0 indicates no diversity (everyone is the same race/ethnicity), while a score closer to 100 indicates higher diversity. The **most diverse city** has the highest index, reflecting a balanced mix of several racial and ethnic groups. The **least diverse** city likely has one overwhelmingly dominant racial/ethnic group.

## Task 1: Load and Describe the Data (3 points)

Run the following code to load the data, then examine it and describe what it contains. Based on the raw numbers alone, which cities stand out as diverse to you?

**ANSWER HERE**
Baltimore City has straight 14k cases of people who identify with  2+ races so that automatically stands out to me. It's 10,000 higher than the 2nd highest which is Germantown with 4k cases of 2+ races.

```{r load-data}
md_cities <- read_csv("https://raw.githubusercontent.com/dwillis/jour405/refs/heads/main/data/usat_diversity_index.csv")

# Preview structure
View(md_cities)
```

## Task 2: Calculate Race Percentages

```{r race-percentages}
md_cities <- md_cities |>
  mutate(
    White_pct = White / TotalPop,
    Black_pct = Black / TotalPop,
    Native_pct = Native / TotalPop,
    Asian_pct = Asian / TotalPop,
    NHPI_pct = NHPI / TotalPop
  )
```

## Task 3: Square the Race Percentages

We need to square the race percentages in order to calculate the probability that any two people chosen at random from a given census area are of different races or are Hispanic or not.

```{r square-race}
md_cities <- md_cities |>
  mutate(
    White_pct_sq = White_pct^2,
    Black_pct_sq = Black_pct^2,
    Native_pct_sq = Native_pct^2,
    Asian_pct_sq = Asian_pct^2,
    NHPI_pct_sq = NHPI_pct^2
  )
```


## Task 4: Calculate Race Probabilities (3 points)

The race probability is the sum the squared probabilities for each of the races. It represents the probability that two people randomly chosen from the same city will be of the same race. Which city has the highest race probability, and why do you think that is?

Probably the city with the lowest variation in races, so imma say Ocean Pines with 111 2 plus races, the lowest number which leads to a higher chance for same race and lower chance for race variability.

```{r race-prob}
md_cities <- md_cities |>
  mutate(
    Race_Prob = White_pct_sq + Black_pct_sq + Native_pct_sq + Asian_pct_sq + NHPI_pct_sq
  ) |> 
  arrange(desc(Race_Prob))

View(md_cities)
```


## Task 5: Calculate Ethnicity Percentages and Their Squares (3 points)

Hispanic origin is not a race but an ethnicity or nationality â€“ and a separate Census question. The probability someone is Hispanic or not Hispanic must be calculated separately from race, and Hisp_Prob is the probability that two randomly selected people will be Hispanic or not. That's an important distinction, because unlike race probability, this measures the likelihood of a binary question: that both random people will be Hispanic. What do you notice about the cities with the *lowest* Hisp_Prob scores?

**ANSWER HERE**
Cities with lowest hisp_prob scores are at 50%, which is already so much higher than the percentages for hispanic and for most other races in general, probably because of the question asked being a binary one. It significantly increases the floor that the data starts at while maintaing the ceiling that all of the data is under (100%).

```{r ethnicity}
md_cities <- md_cities |>
  mutate(
    HispTotal = HISPANIC + NotHispanic,
    Hisp_pct = HISPANIC / HispTotal,
    NotHisp_pct = NotHispanic / HispTotal,
    Hisp_pct_sq = Hisp_pct^2,
    NotHisp_pct_sq = NotHisp_pct^2,
    Hisp_Prob = Hisp_pct_sq + NotHisp_pct_sq
  ) |> 
  arrange(Hisp_Prob)

View(md_cities)
```

## Task 6: Multiply Race and Ethnicity Probabilities

Here we multiply the two probabilities together to get the probability that any two random people have the SAME race and ethnicity.

```{r combined-prob}
md_cities <- md_cities |>
  mutate(
    RaceEth_Prob = Race_Prob * Hisp_Prob
  )
```


## Task 7: Calculate Diversity Index (3 points)

The final step is to calculate the probability that two people randomly chosen WILL NOT BE OF THE SAME RACE OR ETHNICITY. In other words, the highest index scores will be cities where those two random people will be from different backgrounds. Put simply, more diverse. Which cities are the top 3, and where are they located? Look at the bottom of the list - which city is the least diverse, and where is it?

**ANSWER HERE**
Langely, Wheaton, and Adelphi.I looked all these cities up together in the same search, and a early result was a UMD page about how Adelphi and Wheaton provided homes for immigrants, which already contributes to a high level of diversity. Lake Shore is lowest, at 15% and it is a suburb in Baltimore. Which is interesting to me because I thought Baltimore would be the highest in diversity since it had the highest reported rate of two or more races being identified. 

```{r diversity-index}
md_cities <- md_cities |>
  mutate(
    Diversity_Index = (1 - RaceEth_Prob) * 100
  ) |> 
  arrange(desc(Diversity_Index))

View(md_cities)
```

### Pitch a story (8 points)

Given the data that you've produced here, write a headline and lede of the most interesting story from this exercise, and add below that details on how you would report it out: who you'd talk to and the questions you'd ask. When you describe the Diversity Index values, do so in a similar way to how USA Today did; the raw values themselves won't mean much to readers.

**ANSWER HERE**
Langely, Wheaton, and Adelphi are the most diverse cities in Maryland, according to USA Today.

Lede: USA Today developed a Diversity Index, that determines the chances people - in this case in Maryland - can meet and have the same racial background. Places with high diversity indicate a low chance people will meet and have the same background and a low diversity index indicates a high chance they will have the same race. USA Today describes in a video that if your county is at 25% Diversity Index, then the chances you meet someone with a different race than you is 25%. 

Who I'd talk to: People from the top 3 and the bottom 1, someone from USA Today that has to work regularly with the Diversity Index. Maybe residents who were there during the 2nd wave of immigration and younger residents too to show two different perspectives on diversity over time.
